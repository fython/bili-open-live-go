/**
 * 用于在官方文档中批量获取公共错误码并生成代码定义的脚本
 * 文档：https://open-live.bilibili.com/document/74eec767-e594-7ddd-6aba-257e8317c05d
 *
 * 仅供项目单次生成用，请勿滥用
 */

let rows = Array.from(document.querySelectorAll('table'))
    .find(e => e.querySelector('thead')?.innerHTML?.includes('错误代码'))
    ?.querySelectorAll('tbody tr');

if (!rows) {
    throw new Error('找不到错误代码定义的 table');
}

let errors = Array.from(rows.values())
    .map(row => Array.from(row.querySelectorAll('td')).map(el => el.innerText));

let code = `// generated by buildtools/browser-get-err-code.js. DO NOT EDIT
package biliopen

var errorCodeDescription = map[CommonErrorCode]string{
`

for (const e of errors) {
    code += `\t// ${e[2]}\n\t${e[0]}: "${e[1]}",\n`;
}

code += '}\n';
